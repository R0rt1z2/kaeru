//
// SPDX-FileCopyrightText: 2025 Roger Ortiz <me@r0rt1z2.com>
// Font Copyright: (c) 1988-2025 Damien Guard
// Font: Comic Fans font by DamienG https://damieng.com/zx-origins
// Font License: Custom - see https://damieng.com/zx-origins for terms
// Code License: AGPL-3.0-or-later
//

#include <lib/framebuffer.h>

#ifdef CONFIG_FONT_8X8_CALSTONE

static const uint8_t font8x8_calstone_data[96][8] = {
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  //
    { 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x18, 0x18 },  // !
    { 0x66, 0xee, 0xcc, 0x00, 0x00, 0x00, 0x00, 0x00 },  // "
    { 0x00, 0x6c, 0xfe, 0xfe, 0x6c, 0xfe, 0xfe, 0x6c },  // #
    { 0x10, 0x7e, 0xfe, 0xd0, 0x7c, 0x16, 0xfe, 0xfc },  // $
    { 0xe3, 0xe7, 0xee, 0x1c, 0x38, 0x77, 0xe7, 0xc7 },  // %
    { 0x78, 0xf8, 0xc0, 0x7e, 0xfe, 0xcc, 0xfe, 0x7e },  // &
    { 0x18, 0x38, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00 },  // '
    { 0x1c, 0x3c, 0x70, 0x60, 0x60, 0x70, 0x3c, 0x1c },  // (
    { 0x38, 0x3c, 0x0e, 0x06, 0x06, 0x0e, 0x3c, 0x38 },  // )
    { 0x00, 0x24, 0x3c, 0x7e, 0x7e, 0x3c, 0x24, 0x00 },  // *
    { 0x00, 0x18, 0x18, 0x7e, 0x7e, 0x18, 0x18, 0x00 },  // +
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x38, 0x30 },  // ,
    { 0x00, 0x00, 0x00, 0x7e, 0x7e, 0x00, 0x00, 0x00 },  // -
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00 },  // .
    { 0x03, 0x07, 0x0e, 0x1c, 0x38, 0x70, 0xe0, 0xc0 },  // /
    { 0x7c, 0xfe, 0xce, 0xde, 0xf6, 0xe6, 0xfe, 0x7c },  // 0
    { 0x18, 0x38, 0x38, 0x18, 0x18, 0x18, 0x3c, 0x3c },  // 1
    { 0xfc, 0xfe, 0x06, 0x3e, 0x7c, 0xc0, 0xfe, 0xfe },  // 2
    { 0xfe, 0xfe, 0x0e, 0x3c, 0x3c, 0x06, 0xfe, 0xfc },  // 3
    { 0xc6, 0xc6, 0xc6, 0xfe, 0x7e, 0x06, 0x06, 0x06 },  // 4
    { 0xfe, 0xfe, 0xc0, 0xfc, 0xfe, 0x06, 0xfe, 0xfc },  // 5
    { 0x7c, 0xfc, 0xc0, 0xfc, 0xfe, 0xc6, 0xfe, 0x7c },  // 6
    { 0xfe, 0xfe, 0x06, 0x0c, 0x18, 0x30, 0x30, 0x30 },  // 7
    { 0x7c, 0xfe, 0xc6, 0x7c, 0x7c, 0xc6, 0xfe, 0x7c },  // 8
    { 0x7c, 0xfe, 0xc6, 0xfe, 0x7e, 0x06, 0x7e, 0x7c },  // 9
    { 0x00, 0x00, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00 },  // :
    { 0x00, 0x00, 0x18, 0x18, 0x00, 0x18, 0x38, 0x30 },  // ;
    { 0x00, 0x0c, 0x1c, 0x38, 0x70, 0x38, 0x1c, 0x0c },  // <
    { 0x00, 0x00, 0x7e, 0x7e, 0x00, 0x7e, 0x7e, 0x00 },  // =
    { 0x00, 0x60, 0x70, 0x38, 0x1c, 0x38, 0x70, 0x60 },  // >
    { 0x7c, 0xfe, 0xc6, 0x0c, 0x18, 0x00, 0x18, 0x18 },  // ?
    { 0x7c, 0xfe, 0xc6, 0xde, 0xde, 0xc0, 0xfe, 0x7e },  // @
    { 0x7c, 0xfe, 0xc6, 0xfe, 0xfe, 0xc6, 0xc6, 0xc6 },  // A
    { 0xfc, 0xfe, 0xc6, 0xfc, 0xfc, 0xc6, 0xfe, 0xfc },  // B
    { 0x3c, 0x7e, 0xe6, 0xc0, 0xc0, 0xe6, 0x7e, 0x3c },  // C
    { 0xf8, 0xfc, 0xce, 0xc6, 0xc6, 0xce, 0xfc, 0xf8 },  // D
    { 0xfe, 0xfe, 0xc0, 0xf8, 0xf8, 0xc0, 0xfe, 0xfe },  // E
    { 0xfe, 0xfe, 0xc0, 0xf8, 0xf8, 0xc0, 0xc0, 0xc0 },  // F
    { 0x3c, 0x7e, 0xe0, 0xce, 0xce, 0xe6, 0x7e, 0x3e },  // G
    { 0xc6, 0xc6, 0xc6, 0xfe, 0xfe, 0xc6, 0xc6, 0xc6 },  // H
    { 0x3c, 0x3c, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x3c },  // I
    { 0x06, 0x06, 0x06, 0x06, 0x06, 0xc6, 0xfe, 0x7c },  // J
    { 0xc6, 0xce, 0xdc, 0xf8, 0xf8, 0xdc, 0xce, 0xc6 },  // K
    { 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xfe, 0xfe },  // L
    { 0xc6, 0xee, 0xfe, 0xfe, 0xd6, 0xc6, 0xc6, 0xc6 },  // M
    { 0xc6, 0xe6, 0xf6, 0xfe, 0xde, 0xce, 0xc6, 0xc6 },  // N
    { 0x38, 0x7c, 0xee, 0xc6, 0xc6, 0xee, 0x7c, 0x38 },  // O
    { 0xfc, 0xfe, 0xc6, 0xfe, 0xfc, 0xc0, 0xc0, 0xc0 },  // P
    { 0x38, 0x7c, 0xee, 0xc6, 0xc6, 0xec, 0x7e, 0x36 },  // Q
    { 0xfc, 0xfe, 0xc6, 0xfc, 0xf8, 0xdc, 0xce, 0xc6 },  // R
    { 0x7e, 0xfe, 0xc0, 0xfc, 0x7e, 0x06, 0xfe, 0xfc },  // S
    { 0x7e, 0x7e, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18 },  // T
    { 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xfe, 0x7c },  // U
    { 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xee, 0x7c, 0x38 },  // V
    { 0xc6, 0xc6, 0xc6, 0xd6, 0xfe, 0xfe, 0xee, 0xc6 },  // W
    { 0xc6, 0xee, 0x7c, 0x38, 0x38, 0x7c, 0xee, 0xc6 },  // X
    { 0xc6, 0xc6, 0xc6, 0xfe, 0x7e, 0x06, 0xfe, 0xfc },  // Y
    { 0xfe, 0xfe, 0x0e, 0x1c, 0x70, 0xe0, 0xfe, 0xfe },  // Z
    { 0x7c, 0x7c, 0x60, 0x60, 0x60, 0x60, 0x7c, 0x7c },  // [
    { 0xc0, 0xe0, 0x70, 0x38, 0x1c, 0x0e, 0x07, 0x03 },  // \ (backslash)
    { 0x7c, 0x7c, 0x0c, 0x0c, 0x0c, 0x0c, 0x7c, 0x7c },  // ]
    { 0x00, 0x18, 0x3c, 0x7e, 0x18, 0x18, 0x18, 0x18 },  // ^
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff },  // _
    { 0x3e, 0x7e, 0x60, 0xfc, 0xfc, 0x60, 0xfe, 0xfe },  // £
    { 0x00, 0x7c, 0xfe, 0xc6, 0xfe, 0xfe, 0xc6, 0xc6 },  // a
    { 0x00, 0xfc, 0xfe, 0xc6, 0xfc, 0xc6, 0xfe, 0xfc },  // b
    { 0x00, 0x3c, 0x7e, 0xe6, 0xc0, 0xe6, 0x7e, 0x3c },  // c
    { 0x00, 0xf8, 0xfc, 0xce, 0xc6, 0xce, 0xfc, 0xf8 },  // d
    { 0x00, 0xfe, 0xfe, 0xc0, 0xf8, 0xc0, 0xfe, 0xfe },  // e
    { 0x00, 0xfe, 0xfe, 0xc0, 0xf8, 0xf8, 0xc0, 0xc0 },  // f
    { 0x00, 0x3e, 0x7e, 0xe0, 0xce, 0xe6, 0x7e, 0x3e },  // g
    { 0x00, 0xc6, 0xc6, 0xfe, 0xfe, 0xc6, 0xc6, 0xc6 },  // h
    { 0x00, 0x3c, 0x3c, 0x18, 0x18, 0x18, 0x3c, 0x3c },  // i
    { 0x00, 0x06, 0x06, 0x06, 0x06, 0xc6, 0xfe, 0x7c },  // j
    { 0x00, 0xc6, 0xce, 0xdc, 0xf8, 0xdc, 0xce, 0xc6 },  // k
    { 0x00, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xfe, 0xfe },  // l
    { 0x00, 0xc6, 0xee, 0xfe, 0xfe, 0xd6, 0xc6, 0xc6 },  // m
    { 0x00, 0xc6, 0xe6, 0xf6, 0xfe, 0xde, 0xce, 0xc6 },  // n
    { 0x00, 0x38, 0x7c, 0xee, 0xc6, 0xee, 0x7c, 0x38 },  // o
    { 0x00, 0xfc, 0xfe, 0xc6, 0xfe, 0xfc, 0xc0, 0xc0 },  // p
    { 0x00, 0x38, 0x7c, 0xee, 0xc6, 0xec, 0x7e, 0x36 },  // q
    { 0x00, 0xfc, 0xfe, 0xc6, 0xfc, 0xf8, 0xdc, 0xce },  // r
    { 0x00, 0x7e, 0xfe, 0xc0, 0x7c, 0x06, 0xfe, 0xfc },  // s
    { 0x00, 0x7e, 0x7e, 0x18, 0x18, 0x18, 0x18, 0x18 },  // t
    { 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xfe, 0x7c },  // u
    { 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0xee, 0x7c, 0x38 },  // v
    { 0x00, 0xc6, 0xc6, 0xd6, 0xfe, 0xfe, 0xee, 0xc6 },  // w
    { 0x00, 0xc6, 0xee, 0x7c, 0x38, 0x7c, 0xee, 0xc6 },  // x
    { 0x00, 0xc6, 0xc6, 0xfe, 0x7e, 0x06, 0xfe, 0xfc },  // y
    { 0x00, 0xfe, 0xfe, 0x1c, 0x38, 0x70, 0xfe, 0xfe },  // z
    { 0x0e, 0x1e, 0x18, 0x70, 0x70, 0x18, 0x1e, 0x0e },  // {
    { 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18 },  // |
    { 0x70, 0x78, 0x18, 0x0e, 0x0e, 0x18, 0x78, 0x70 },  // }
    { 0x36, 0x7e, 0x6c, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ~
    { 0x3c, 0x66, 0xdb, 0xb1, 0xb1, 0xdb, 0x66, 0x3c }   // ©
};

void fb_char(uint32_t x, uint32_t y, char c, uint32_t color) {
    int index = c - 32;
    if (index < 0 || index >= 96) return;
    
    uint32_t scale = fb_get_text_scale();
    
    for (int row = 0; row < 8; row++) {
        uint8_t line = font8x8_calstone_data[index][row];
        for (int col = 0; col < 8; col++) {
            if (line & (1 << (7 - col))) {
                fb_fill_rect(x + (col * scale), y + (row * scale), scale, scale, color);
            }
        }
    }
}
uint32_t fb_get_char_width(void) {
    return 8 * fb_get_text_scale();
}

uint32_t fb_get_char_height(void) {
    return 8 * fb_get_text_scale();
}

#endif